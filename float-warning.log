# Float.js Framework Audit - Nexovisi√≥n Migration

## Issues Encountered & Resolved

### 1. Build Errors with Node.js Built-ins (fs, path)
- **Problem**: Direct use of `fs` and `path` in components or imported handlers triggers `esbuild` resolution errors in the client bundle (`platform: browser`).
- **Resolution**: Implemented a pre-build script (`scripts/pre-build.js`) that converts Markdown content to JSON data. Components now import JSON files, which is safe for both client and server bundles.

### 2. Missing Support for Path Aliases in SSR
- **Problem**: The framework's internal `transformFile` and `rewriteImports` (used for SSR/pre-rendering) did not support the `@/` alias defined in `tsconfig.json`.
- **Resolution**: Patched `framework/float-js/packages/core/src/build/transform.ts` to recognize and resolve `@/` aliases relative to the project root.

### 3. SSR Failures with CSS Imports
- **Problem**: Importing CSS files in React components causes `ERR_UNKNOWN_FILE_EXTENSION` errors during SSR because Node.js cannot import CSS as modules.
- **Resolution**: Patched the framework's `rewriteImports` to mock `.css` (and other asset) imports as empty modules (`data:text/javascript,export default {}`) for the SSR phase.

### 4. Nested HTML Tags in Pre-rendered Output
- **Problem**: Standard React layouts often include `html`, `head`, and `body` tags, which Float also provides in its fixed shell, leading to invalid nested structures.
- **Resolution**: Updated `app/layout.tsx` to only provide the inner application structure, letting the framework manage the global document shell.

### 5. Node.js Loader Requirements
- **Problem**: Node.js ESM does not natively support `.ts` extensions in import statements.
- **Resolution**: Used the `tsx` loader (`node --import tsx`) to run the build CLI, allowing Node to resolve and load TypeScript files during the pre-rendering phase.

## Recommendations for Framework Improvement
- Implement recursive transformation for all nested imports in `transformFile`.
- Add native support for path aliases in the transformation logic.
- Integrate a default CSS/asset mocker for server-side rendering.
- Consider a way to strip server-only code from the client bundle automatically (e.g., via specialized file extensions or "use server" directives).
